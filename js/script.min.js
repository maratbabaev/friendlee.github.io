"use strict";var range=document.querySelectorAll('.range input[type="range"]'),num=document.querySelectorAll(".range .range-input"),sum=document.querySelectorAll('.input input[type="text"]'),line=document.querySelectorAll(".range-line div"),rangeRow=document.querySelectorAll(".range-row"),btn=document.querySelector(".form-btn"),proc=document.querySelector(".range-text__proc"),form=document.querySelector(".main-form");function handleSubmit(e){e.preventDefault();var a=new FormData(e.target),n=Object.fromEntries(a.entries());form.classList.add("not-active"),btn.classList.add("active"),rangeRow.forEach((function(e){e.classList.add("disabled")})),setTimeout((function(){btn.classList.add("pressed"),btn.querySelector("span").innerHTML="Отправлено",setTimeout((function(){alert("Стоимость автомобиля: ".concat(n.num1," ₽\r\nПервоначальный взнос: ").concat(n.num2,"\r\nСрок лизинга: ").concat(n.num3,"\r\nПроцент: ").concat(n.procent,"\r\nСумма договора лизинга: ").concat(n.res1,"\r\nЕжемесячный платеж от: ").concat(n.res2)),btn.classList.remove("pressed"),btn.classList.remove("active"),btn.querySelector("span").innerHTML="Оставить заявку",form.classList.remove("not-active"),rangeRow.forEach((function(e){e.classList.remove("disabled")}))}),300)}),1e3)}function sumRes(){proc.value=Math.round(+num[0].value.replace(/[^0-9]/g,"")/100*+num[1].value.replace(/[^0-9]/g,"")).toLocaleString()+" ₽",sum[1].value=Math.round((+num[0].value.replace(/[^0-9]/g,"")-+proc.value.replace(/[^0-9]/g,""))*(.05*Math.pow(1.05,+num[2].value.replace(/[^0-9]/g,""))/(Math.pow(1.05,+num[2].value.replace(/[^0-9]/g,""))-1))).toLocaleString()+" ₽",sum[0].value=Math.round(+proc.value.replace(/[^0-9]/g,"")+ +num[2].value.replace(/[^0-9]/g,"")*+sum[1].value.replace(/[^0-9]/g,"")).toLocaleString()+" ₽"}function btnActive(){btn.classList.remove("not-active")}sumRes(),form.addEventListener("submit",handleSubmit),proc.addEventListener("input",(function(){num[1].value=Math.round(100/+num[0].value.replace(/[^0-9]/g,"")*+proc.value.replace(/[^0-9]/g,""))+" %",range[1].value=+num[1].value.replace(/[^0-9]/g,""),line[1].style.width="".concat(2*(+range[1].value-10),"%"),btnActive()})),proc.addEventListener("blur",(function(){rangeRow[1].classList.add("disabled"),proc.value=(+proc.value.replace(/[^0-9]/g,"")).toLocaleString()+" ₽",+num[1].value.replace(/[^0-9]/g,"")<10&&(num[1].value="10 %",proc.value=Math.round(.1*+num[0].value.replace(/[^0-9]/g,"")).toLocaleString()+" ₽"),+num[1].value.replace(/[^0-9]/g,"")>60&&(num[1].value="60 %",proc.value=Math.round(.6*+num[0].value.replace(/[^0-9]/g,"")).toLocaleString()+" ₽")})),proc.addEventListener("focus",(function(){rangeRow.forEach((function(e){e.classList.remove("active")})),rangeRow[1].classList.add("active"),rangeRow[1].classList.remove("disabled")})),range.forEach((function(e,a){0===a&&(num[a].value=(+e.value).toLocaleString(),line[a].style.width="".concat(100/85e5*(+e.value-15e5),"%")),1===a&&(num[a].value=(+e.value).toLocaleString()+" %",line[a].style.width="".concat(2*(+e.value-10),"%")),2===a&&(num[a].value=(+e.value).toLocaleString(),line[a].style.width="".concat(100/114*(+e.value-6),"%")),e.addEventListener("input",(function(){rangeRow[a].classList.add("disabled"),btnActive(),num[a].value=(+e.value).toLocaleString(),sumRes(),0===a&&(num[a].value=(+e.value).toLocaleString(),line[a].style.width="".concat(100/85e5*(+e.value-15e5),"%")),1===a&&(num[a].value=(+e.value).toLocaleString()+" %",line[a].style.width="".concat(2*(+e.value-10),"%")),2===a&&(num[a].value=(+e.value).toLocaleString(),line[a].style.width="".concat(100/114*(+e.value-6),"%"))}))})),num.forEach((function(e,a){e.addEventListener("input",(function(){range[a].value=+e.value.replace(/[^0-9]/g,""),btnActive(),0===a&&(line[a].style.width="".concat(100/85e5*(range[a].value-15e5),"%")),1===a&&(e.value=+e.value.replace(/[^0-9]/g,"")+" %",line[a].style.width="".concat(2*(+range[a].value-10),"%")),2===a&&(line[a].style.width="".concat(100/114*(range[a].value-6),"%"))})),e.addEventListener("focus",(function(){rangeRow.forEach((function(e){e.classList.remove("active")})),rangeRow[a].classList.add("active"),rangeRow[a].classList.remove("disabled")})),e.addEventListener("blur",(function(){rangeRow[a].classList.add("disabled"),e.value=(+e.value.replace(/[^0-9]/g,"")).toLocaleString(),0===a&&(+e.value.replace(/[^0-9]/g,"")<15e5&&(e.value="1 500 000"),+e.value.replace(/[^0-9]/g,"")>1e7&&(e.value="10 000 000")),1===a&&(e.value=(+e.value.replace(/[^0-9]/g,"")).toLocaleString()+" %",+e.value.replace(/[^0-9]/g,"")<10&&(e.value="10 %"),+e.value.replace(/[^0-9]/g,"")>60&&(e.value="60 %")),2===a&&(+e.value.replace(/[^0-9]/g,"")<6&&(e.value="6"),+e.value.replace(/[^0-9]/g,"")>120&&(e.value="120")),sumRes()}))}));